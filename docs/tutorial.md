# Garnet チュートリアル

Garnetの文法では、文の前後の改行および空白は意味を持ちません。コードの視認性を向上するために、自由な場所に挿入することができます。

### コメント

`[]`で囲まれた部分はコメントとなり、解釈されません。

改行は無視されるため、複数行のコメントを追加することもできます。

```
[ これはコメントになります ]

[ 複数行のコメントは
        そのまま追加できます ]
```

### 数値リテラル

**整数および小数**を数値リテラルとして式の中で扱うことができます。処理系によって整数は、暗黙的に浮動小数点に変換されます。

```
1
```

- `1.0`という数値を表します。

### 文字列リテラル

文字列リテラルは、`""`で囲うことで表現できます。因子の表現として**式の中**で使用可能です。

文字列内で`"`を使用する場合は、**バックスラッシュ`\`を使用してエスケープ**することができます。`""`で、空文字列を表すことができます。

```
"\"Hello, world!\""
```

- `"Hello, world!"`という文字列を表します。

### 変数

> `([A-Za-z_$][A-Za-z_$0-9]*)/)`

変数名は1文字以上で、**大文字及び小文字のアルファベット、0〜9の数字、アンダースコア(U+005F)、DOLLAR SIGN(U+0024)**を使用することができますが、数字を先頭にすることはできません。

また、先頭の文字にのみ**絵文字**を使用することができます。使用可能な絵文字の種類の定義は以下のとおりです。

```
\u{00A9}\u{00AE}\u{203C}\u{2049}\u{2122}\u{2139}\u{2194}-\u{2199}\u{21A9}-\u{21AA}\u{231A}-\u{231B}\u{2328}\u{23CF}\u{23E9}-\u{23F3}\u{23F8}-\u{23FA}\u{24C2}\u{25AA}-\u{25AB}\u{25B6}\u{25C0}\u{25FB}-\u{25FE}\u{2600}-\u{2604}\u{260E}\u{2611}\u{2614}-\u{2615}\u{2618}\u{261D}\u{2620}\u{2622}-\u{2623}\u{2626}\u{262A}\u{262E}-\u{262F}\u{2638}-\u{263A}\u{2648}-\u{2653}\u{2660}\u{2663}\u{2665}-\u{2666}\u{2668}\u{267B}\u{267F}\u{2692}-\u{2694}\u{2696}-\u{2697}\u{2699}\u{269B}-\u{269C}\u{26A0}-\u{26A1}\u{26AA}-\u{26AB}\u{26B0}-\u{26B1}\u{26BD}-\u{26BE}\u{26C4}-\u{26C5}\u{26C8}\u{26CE}-\u{26CF}\u{26D1}\u{26D3}-\u{26D4}\u{26E9}-\u{26EA}\u{26F0}-\u{26F5}\u{26F7}-\u{26FA}\u{26FD}\u{2702}\u{2705}\u{2708}-\u{270D}\u{270F}\u{2712}\u{2714}\u{2716}\u{271D}\u{2721}\u{2728}\u{2733}-\u{2734}\u{2744}\u{2747}\u{274C}\u{274E}\u{2753}-\u{2755}\u{2757}\u{2763}-\u{2764}\u{2795}-\u{2797}\u{27A1}\u{27B0}\u{27BF}\u{2934}-\u{2935}\u{2B05}-\u{2B07}\u{2B1B}-\u{2B1C}\u{2B50}\u{2B55}\u{3030}\u{303D}\u{3297}\u{3299}\u{1F004}\u{1F0CF}\u{1F170}-\u{1F171}\u{1F17E}-\u{1F17F}\u{1F18E}\u{1F191}-\u{1F19A}\u{1F201}-\u{1F202}\u{1F21A}\u{1F22F}\u{1F232}-\u{1F23A}\u{1F250}-\u{1F251}\u{1F300}-\u{1F321}\u{1F324}-\u{1F393}\u{1F396}-\u{1F397}\u{1F399}-\u{1F39B}\u{1F39E}-\u{1F3F0}\u{1F3F3}-\u{1F3F5}\u{1F3F7}-\u{1F4FD}\u{1F4FF}-\u{1F53D}\u{1F549}-\u{1F54E}\u{1F550}-\u{1F567}\u{1F56F}-\u{1F570}\u{1F573}-\u{1F579}\u{1F587}\u{1F58A}-\u{1F58D}\u{1F590}\u{1F595}-\u{1F596}\u{1F5A5}\u{1F5A8}\u{1F5B1}-\u{1F5B2}\u{1F5BC}\u{1F5C2}-\u{1F5C4}\u{1F5D1}-\u{1F5D3}\u{1F5DC}-\u{1F5DE}\u{1F5E1}\u{1F5E3}\u{1F5EF}\u{1F5F3}\u{1F5FA}-\u{1F64F}\u{1F680}-\u{1F6C5}\u{1F6CB}-\u{1F6D0}\u{1F6E0}-\u{1F6E5}\u{1F6E9}\u{1F6EB}-\u{1F6EC}\u{1F6F0}\u{1F6F3}\u{1F910}-\u{1F918}\u{1F980}-\u{1F984}\u{1F9C0}
```

使用する変数を事前に宣言する必要はありません。また、変数に型を明示的に指定することはなく、式の値として数値または文字列を格納することができます。

また、変数には初期化時に定義される定数があります。これらはプログラムの中の任意の場所で呼び出すことができます。

- **TODAY** : 今日の日付を表す文字列
- **SHELL** : 実行中のシェルのパスを表す文字列
- **GARNET_VER** : 処理系のバージョン

### 代入文

> `変数 <= 式;`

代入キーワード`<=`を使用して**式の値**を変数に代入することができます。

左側に変数名、右側に式を与えます。

```
x <= 50;
    [ xに50.0を代入 ]

y <= "Garnet";
    [ yに'Garnet'を代入 ]
```

### 出力文

> `<< 式;`

`<<`を使用して、標準出力に対して**式の値**を出力することができます。

```
<< 1
<< "あ"
<< x
```

上記の例では、`1`という数値、`あ`という文字列、`x`という変数の内容を出力します。

### 入力文

> `>> 変数;`

出力文と反対に、`>>`を使用して、標準入力からの入力を受け付けることができます。

```
>> x
```

- 入力された文字列は、**変数xに代入**されます。

### 加算

> `項+項`

式の中で`+`演算子を使用して、**数値の加算または文字列の結合**を行うことができます。

左の項が数値(数値リテラル、または数値を持つ変数)の場合は、数値として加算を行います。整数値・小数値を暗黙的に混合させることができます。

左の項が文字列(文字列リテラル、または文字列を持つ変数)の場合、文字列の結合を行います。元の変数に対して破壊的な変更を*行いません*。

```
[ 数値としての加算 ]

result <= 1+10;
    [ 加算結果をresultに格納する ]

[ 文字列としての結合 ]

<< "結果は"+result+"です。";
    [ 結合結果を標準出力する ]
```

- 最後の行が実行されたあと`result`変数の内容は`11.0`になっています。

### if文

> `式 ?? 文`

与えられた式がtruthyな場合、文を実行します。

Garnetでは、Booleanのような型は扱わないため、値が0、NaN、空文字列、false、"undefined"のいずれかとなる式は、**falsyである**とし、それ以外の式はすべて**truthyである**とします。

```
x % 2 :) 0 ?? {
    << "xは偶数です。";
    flag <= 1;
}
```

- 等価演算を用いた基本的なif文です。

1文のみの場合は以下のように書くことができます。

```
x ?? << "x is truthy.";
```

次のプログラム2つは、どちらもネストされたif文を示しています。

```
x ?? {
    y ?? {
        z ?? {
            << "TRUE";
        }
    }
}
```

```
x ?? y ?? z ?? << "TRUE";
```

どちらのプログラムも**xもyもzもtruthyである**ときに"TRUE"を出力する全く同じ意味のプログラムです。

この記法を使用することで、一般的なプログラミング言語における`x && y && z`のような表現を行うことができます。

### exit文

> :/

`:/`を使用して、プログラムを終了させることができます。

```
>> x;
:/ << ":D";
[ print文は実行されない ]
```
